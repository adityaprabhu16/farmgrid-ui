<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <title>FarmGrid</title>
    <!--(0a.) Local Machine: -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <!--(0b.) Web Hosting Server: -->
    <!-- <script type="text/javascript">
		document.write([
			"\<script src='",
			("https:" == document.location.protocol) ? "https://" : "http://",
			"ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js' type='text/javascript'>\<\/script>" 
		].join(''));
	  </script> -->
    <!-- (1.) CSS Bootstrap -->
    <link rel="stylesheet" 
    href = "https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <!-- (2.) JavaScript CDN (Content Delivery Network) -->
    <script src = "https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- (3.) Link CSS File -->
    <link rel="stylesheet" href="css/main.css">
    <!-- (4.) Link JavaScript File-->
    <script src="js/script.js"></script>
    <!-- (5.) JQuery CDN to Keep Last Selected Button Active-->
    <script src = "https://code.jquery.com/jquery-3.6.0.js"></script>
    <!--(6.) Favicon (Logo in the Search Bar)-->
    <link rel="shortcut icon" type = "image/png" href="images/farmgrid-logo-solid.png">
    <!--(7.) Link to Font Style-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100&display=swap" rel="stylesheet">
</head>

<!--id's will be used for JS, classes for CSS-->

<body>
    <!--(7.) Navigation Bar-->
    <!--(7a.) Logo & Company Name-->
    <!--(7b.) Current Page-->
    <div class="navbar">
        <div class = "container">
            <a class = "logo" href="#">
                <span class="company-left">Farm</span>
                <img src="images/farmgrid-logo-solid.png" alt="Company Logo"></img>
                <span class="company-right">Grid</span>
            </a>
            <nav>
                <ul class = "page">
                    <li class = "pagecurrent">
                        <a href="index.html">Home</a>
                    </li>
                    <li class = "pageother">
                        <a href="info.html">About</a>
                    </li>
                    <li class = "pageother">
                        <a href="https://farmgrid-portal.vercel.app/">Portal</a>
                    </li>
                </ul> 
            </nav>
        </div>
    </div>
    <!--(8.) Showcase Section-->
    <!--(8a.) Use CSS to Add Background Picture-->

    <!--(9.) Center Section-->
    <!--(9a.) Chart 1: light, cap, res-->
    <!--(9b.) Char 2: distance-->
    <!--(9c.) Button 1 and Button 2: Button ON/OFF-->
    <!--(9d. )Text Field Display-->
    <div class = "center">
        <div class = "container">
            <div class = "introduction">
                <div class = "container-info">
                    <div class = "row-1">
                        <section class = "info-1">
                            <section class = "info-1b">
                                <h1 class="info-1b-title">
                                    Let's Farm Smarter.
                                </h1>
                                <p>
                                    Agriculture is costly and crops on a field do not grow evenly. Farmers waste crucial resources such as water by applying them evenly throughout the field. Industrial soil moisture sensors are extremely costly, averaging $150 per unit. These costs reduce the number of sensors farmers can buy and place on their fields, creating gaps in insights that lead to little reduction, if any, in water use and management.
                                </p>

                                <h1 class="info-1b-title">
                                    Low-cost. Insightful. Sustainable.
                                </h1>
                                <p>
                                    FarmGrid is an idea to create, install, and scale a grid of wireless sensors for real-time  monitoring of critical field data, such as soil moisture and temperature, using bluetooth low energy and sourcing off-the-shelf parts. By doing so, FarmGrid aims to offer sensors that can last 1-2 years, consume 1/100th of the power, use a couple of batteries, and do so at 1/3rd of the cost of current sensors.
                                </p>

                                <span class="demo-video-container">
                                    <video class="demo-video" src="videos/demo.mp4" width="400px" height="400px" type="video/mp4" controls="controls"></video>
                                </span>

                                <p>
                                    Above is a demo of the minimal viable product (MVP): a wireless device that measures light-intensity, soil-moisture,and is constructed from spare parts to minimize cost. The device is buried within a container filled with soil, and the data read from the device is sent wirelessly to the computer. Light and soil moisture levels are adjusted throughout the time lapse to show how the readings of the device change live! The orange line is light-intensity and the blue lines are soil moisture levels from two different readings. The MVP costs approximately $20 to build.
                                </p>
                                
                            </section>
                        </section>
                    </div>
                </div>
            </div>
            <div class = "icons">
                <p class= "icon" style = 'line-height: 60px;font-family: Helvetica;color: #fff;font-size: 40px;' id="moist_res">
                    <img src = 'images/moist_res.png' height="60px" width="60px" style='vertical-align: middle' /> 0.00
                </p>
                <p class = "icon" style = 'line-height: 60x;font-family: Helvetica;color: #fff;font-size: 40px;' id="moist_cap">
                    <img src = 'images/moist_cap.png' height="60px" width="60px" style='vertical-align: middle' /> 00.00 
                </p>
                <p class = "icon" style = 'line-height: 60px;font-family: Helvetica;color: #fff;font-size: 40px;' id="light">
                    <img src = 'images/light.png' height="60px" width="60px" style='vertical-align: middle' /> 00.00
                </p>    
            </div>

            <section class="multigraph">
                <div class="col-md-10 offset-md-1">
                    <div class = "multigraph-body">
                        <h1>Soil Moisture % and Light Intensity (Lux)</h1>
                    </div>
                    <div class="multigraph-body">
                        <canvas id = "sensorchart" class = "sensordisplay"> </canvas>
                    </div>
                </div>
            </section>

            <div class = "icons">
                <p style = 'line-height: 60px;font-family: Helvetica;color: #fff;font-size: 40px;' id="distance">
                    <img src = 'images/distance.png' height="60px" width="60px" style='vertical-align: middle' /> 00.00
                </p>
            </div>
            
            <section id = "unigraph">
                <div class="col-md-10 offset-md-1">
                    <div class = "unigraph-body">
                        <h1>Water Reservoir Level (cm)</h1>
                    </div>
                    <div class = "unigraph-body">
                        <canvas id = "levelchart" class = "leveldisplay"></canvas>
                    </div>
                </div>
            </section>

            <div class = "icons">
                <p style = 'line-height: 60px; font-family: Helvetica; color: #fff; font-size: 40px;' id="pump">
                    <img src = "images/pump.png" height="60px" width="60px" style='vertical-align: middle'/> <span id="pump-text">N/A</span>
                </p>
            </div>

            <section id = "pumpgraph">
                <div class="col-md-10 offset-md-1">
                    <div class="pumpgraph-body">
                        <h1>Current Valve State (ON/OFF)</h1>
                    </div>
                    <div class="pumpgraph-body">
                        <canvas id = "pumpchart" class="pumpdisplay"></canvas>
                    </div>
                </div>
            </section>

            <section class = "buttons">
                <button type = "button" onclick="setTimeout(reset, 30000)" id="on" class = "button onbutton"> Valve ON</button>            
                <button type = "button" id = "off" class = "button offbutton"> Valve OFF</button>
            </section>

            <section class = "textfield">
                <label class = "output">
                    <textarea type = "text" id = "field" class ="result" rows="1" columns="10" maxlength="10" minlength = "4" required></textarea>
                    <span class = "placeholder">Output</span>
                </label>
            </section>

        </div>
    </div>

    <!--(10.) Footer Section-->
    <!--(10a.) Paragraph-->
    <div class="footer">
        <div class ="container">
            <p class = "paragraph">
                Copyright &copy; 2022, FarmGrid
            </p>
        </div>
    </div>
</body>

<script>
    let onBtn = document.getElementById('on');
    let offBtn = document.getElementById('off');
    let textSpace = document.getElementById('field');
    var urlON = "https://microsight.000webhostapp.com/api/pump/update.php?id=1&status=on";
    var urlOFF = "https://microsight.000webhostapp.com/api/pump/update.php?id=1&status=off";

    onBtn.addEventListener('click', function() {
        textSpace.value = "VALVE ON"
        textSpace.style.backgroundColor = "#4CAF50";
        textSpace.style.color = "white";
        $.getJSON(urlON, function(data) {
            console.log(data);
        });
    });
    offBtn.addEventListener('click', function() {
        textSpace.value = "VALVE OFF";
        textSpace.style.backgroundColor = "#ee5860";
        textSpace.style.color = "white";
        $.getJSON(urlOFF, function(data){
            console.log(data);
        });
    });

    function reset() {
        textSpace.value = "AUTO CLOSED";
        textSpace.style.backgroundColor = "#ee5860";
        textSpace.style.color = "white";
        $.getJSON(urlOFF, function(data){
            console.log(data);
        });
    }

</script>

</html>